generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  name      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  files     File[]
}

model File {
  id               String     @id @default(cuid())
  originalName     String
  uniqueName       String     @unique
  url              String
  mimetype         String
  size             Int
  uploadedAt       DateTime   @default(now())
  expiresAt        DateTime
  status           FileStatus @default(ACTIVE)
  userId           String?
  tier             TIER       @default(ANONYMOUS)
  password         String?
  downloadCount    Int        @default(0)
  lastDownloadedAt DateTime?
  user             User?      @relation(fields: [userId], references: [id])
}

enum FileStatus {
  ACTIVE
  EXPIRED
  DELETED
}

enum TIER {
  ANONYMOUS
  FREE
  PRO
}
